<% layout('/layouts/boilerplate') -%>
<section class="editImages">
    <h1><%= stay.title %> </h1>
    <p><%= stay.location %> </p>
    <a href="/stays/<%=stay._id%>" class="listing-form__back-link">View Stay</a>
    <form action="/stays/<%=stay._id%>/edit/images" method="post" class="uploadForm" enctype="multipart/form-data">
        <% if(stay.images.length){ %>
            <p style="font-style: italic; font-weight: 500">
                &ast;<span style="color: #0d6efd; font-size: .8em;">Please check any image you want to remove from stay</span>
            </p>
            <div class="imageList">
                <% stay.images?.forEach(image => { %> 
                <div class="imageContainer">
                    <input type="checkbox" name="deleteImages" value="<%=image.filename%>">
                    <img src="<%=image.url.replace('upload','upload/c_thumb,w_200,g_face')%>" alt="stay-photos" /> 
                </div>
                <% } ) %> 
            </div>   
        <% } %>      
    
        <div class="listing-form__group">
            <p style="font-style: italic;">
                &ast;<span style="color: #0d6efd; font-size: .8em;">Drag one or more images into box or click to  add photos for your listing</span>
            </p>
            <p style="font-style: italic; font-weight: 500">
                &ast;<span style="color: #0d6efd; font-size: .8em;">Please check to make sure the file type is image and size does not exceed 1MB to successfully upload images</span>
            </p>
            <div class="dropbox">
                <p> <span style="font-size: 1.5em;"><b> &#8685;</b></span></p>
            </div>
        </div>
        <input type="file" id="fileElem" accept="image/*" name="images" multiple/>
        <button class="listing-form__btn updatePhoto-btn">Update Photos</button>
    </form>

</section>

<% block('script').append('<script src="/scripts/script.js"></script>') %>